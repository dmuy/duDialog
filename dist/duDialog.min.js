!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).duDialog=t()}(this,function(){"use strict";function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(o="Object"===o&&e.constructor?e.constructor.name:o)||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var k={defaults:{id:null,init:!1,dark:!1,buttons:1,okText:"Ok",yesText:"Yes",noText:"No",cancelText:"Cancel",selection:!1,multiple:!1,minSelect:1,maxSelect:null,allowSearch:!1,selectedValue:null,valueField:"value",textField:"item",callbacks:null},buttons:{DEFAULT:1,OK_CANCEL:2,YES_NO_CANCEL:3,NONE:0}};function r(e){var o={},n=!1,t=0,c=arguments.length;"[object Boolean]"===Object.prototype.toString.call(e)&&(n=e,t++);for(;t<c;t++)!function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n&&"[object Object]"===Object.prototype.toString.call(e[t])?o[t]=r(!0,o[t],e[t]):o[t]=e[t])}(arguments[t]);return o}function S(e,t){Array.isArray(e)?e.forEach(function(e){t.appendChild(e)}):t.appendChild(e)}function x(e,t,o,n){e=document.createElement(e);return void 0!==o&&(e[n?"innerHTML":"innerText"]=o),void 0!==t&&function e(t,o){for(var n in t){var c=t[n];"object"===v(c)&&null!==c&&void 0===c.dataset&&void 0===c[0]?e(c,o[n]):n in o&&(null!==c?o[n]=c:null!==c?o.setAttribute(n,c):o.removeAttribute(n))}}(t,e),e}function s(){function g(){p.dialog.classList.add("dlg--pulse"),setTimeout(function(){p.dialog.classList.remove("dlg--pulse")},200)}function f(){m.querySelectorAll(".dlg-select-checkbox:checked").length===p.config.maxSelect?(m.querySelectorAll(".dlg-select-checkbox:not(:checked)").forEach(function(e){e.setAttribute("disabled",!0),e.parentNode.classList.add("item--disabled")}),h&&h.maxReached&&h.maxReached.call(p,p.config.maxSelect)):m.querySelectorAll(".dlg-select-checkbox:not(:checked)").forEach(function(e){e.removeAttribute("disabled"),e.parentNode.classList.remove("item--disabled")})}function e(e){if("click"===e.type&&(e.target.matches(".du-dialog")&&(p.type===k.buttons.NONE?p.hide():g()),e.target.matches(".dlg-select-item")&&e.target.querySelector(".dlg-select-lbl").click(),e.target.matches(".dlg-action"))){if(e.target.matches(".ok-action"))if(p.config.selection&&p.config.multiple){for(var t=m.querySelectorAll(".dlg-select-checkbox:checked"),o=[],n=[],c=0;c<t.length;c++){var l=p.cache[t[c].id];n.push(l),o.push("string"==typeof l?t[c].value:l[p.config.valueField])}o.length>=p.config.minSelect?(p.config.selectedValue=o,h&&h.itemSelect&&(h.itemSelect.apply({value:o},[e,n]),p.hide())):(g(),h&&h.minRequired&&h.minRequired.call(p,p.config.minSelect))}else h&&h.okClick?h.okClick.apply(p,e):p.hide();e.target.matches(".yes-action")&&(h&&h.yesClick?h.yesClick.apply(p,e):p.hide()),e.target.matches(".no-action")&&(h&&h.noClick?h.noClick.apply(p,e):p.hide()),e.target.matches(".cancel-action")&&(h&&h.cancelClick?h.cancelClick.apply(p,e):p.hide())}var i;if("change"===e.type&&(e.target.matches(".dlg-select-radio")?(i=e.target).checked&&h&&h.itemSelect&&(l=p.cache[i.id],p.config.selectedValue="string"==typeof l?i.value:l[p.config.valueField],h.itemSelect.apply(i,[e,l]),p.hide()):e.target.matches(".dlg-select-checkbox")&&p.config.maxSelect&&f()),"scroll"===e.type&&e.target.matches(".dlg-content")&&e.target.classList[5<e.target.scrollTop?"add":"remove"]("content--scrolled"),"keyup"===e.type&&e.target.matches(".dlg-search"))for(var a=e.target.value,r=m.querySelectorAll(".dlg-select-item"),c=0;c<r.length;c++){var s=r[c],d=s.querySelector(p.config.multiple?".dlg-select-checkbox":".dlg-select-radio"),u="string"===v(l=p.cache[d.id])?l:l[p.config.textField],d=h&&h.onSearch?h.onSearch.call(p,l,a):0<=u.toLowerCase().indexOf(a.toLowerCase());s.classList[d?"remove":"add"]("item--nomatch")}}var t,m,o,n,c,l,i,a,p=this,h=p.config.callbacks;if(p.docFrag=document.createDocumentFragment(),p.dialog=x("div",{className:"du-dialog",id:p.config.id}),p.config.dark&&p.dialog.setAttribute("dark",!0),p.config.selection&&p.dialog.setAttribute("selection",!0),S(p.dialog,p.docFrag),S(n=x("div",{className:"dlg-wrapper",tabIndex:0}),p.dialog),p.title?S(t=x("div",{className:"dlg-header"},p.title),n):p.dialog.classList.add("dlg--no-title"),m=x("div",{className:"dlg-content"}),p.config.selection){p.config.allowSearch&&S(x("input",{className:"dlg-search",placeholder:"Search..."}),t);for(var r=0;r<p.content.length;r++){var s=p.content[r],d=v(s),u="string"===d?s:s[p.config.valueField],y="string"===d?s:s[p.config.textField],b=(p.config.multiple?"dlg-cb":"dlg-radio")+u.toString().replace(/\s+/g,""),d=x("div",{className:"dlg-select-item"}),u=x("input",{className:p.config.multiple?"dlg-select-checkbox":"dlg-select-radio",id:b,name:"dlg-selection",type:p.config.multiple?"checkbox":"radio",value:u,checked:p.config.multiple?p.config.selectedValue&&function(e,t){return!!e&&(void 0!==e[0]&&0<e.filter(function(e){return e===t}).length)}(p.config.selectedValue,u):p.config.selectedValue===u}),y=x("label",{className:"dlg-select-lbl",htmlFor:b},h&&h.itemRender?h.itemRender.call(p,s):'<span class="select-item">'+y+"</span>",!0);p.cache[b]=s,S([u,y],d),S(d,m)}p.config.multiple&&p.config.maxSelect&&f()}else m.innerHTML=p.content;switch(S(m,n),p.type!==k.buttons.NONE&&S(o=x("div",{className:"dlg-actions"}),n),p.type){case k.buttons.OK_CANCEL:S([x("button",{className:"dlg-action cancel-action",tabIndex:2},p.config.cancelText),x("button",{className:"dlg-action ok-action",tabIndex:1},p.config.okText)],o);break;case k.buttons.YES_NO_CANCEL:S([x("button",{className:"dlg-action cancel-action",tabIndex:3},p.config.cancelText),x("button",{className:"dlg-action no-action",tabIndex:2},p.config.noText),x("button",{className:"dlg-action yes-action",tabIndex:1},p.config.yesText)],o);break;case k.buttons.DEFAULT:S(x("button",{className:"dlg-action ok-action",tabIndex:1},p.config.okText),o)}n=m,c="scroll",l=e,Array.isArray(n)?n.forEach(function(e){e.addEventListener(c,l,!1)}):n.addEventListener(c,l,!1),i=p.dialog,a=e,["click","change","keyup"].forEach(function(e){i.addEventListener(e,a,!1)}),p.config.init||p.show()}var l=function(){function i(e,t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=this,c=v(e),l=v(t);if(n.config=r(!0,k.defaults,o),n.type=n.config.selection?n.config.multiple?k.buttons.OK_CANCEL:k.buttons.NONE:n.config.buttons,"undefined"===c||"string"!==c&&null!==e)throw new Error("Dialog title is missing or incorrect format.");if(("undefined"===l||"string"!==l)&&!n.config.selection||!Array.isArray(t)&&n.config.selection)throw new Error("Dialog message is missing or incorrect format.");n.title=e,n.content=t,n.cache={},n.config.init||s.apply(n)}var e,t,o;return e=i,(t=[{key:"show",value:function(){var l=this;l.config.init&&s.apply(l),S(l.docFrag,document.body),setTimeout(function(){if(l.dialog.classList.add("dlg--open"),l.config.selection&&!l.config.multiple){var e=l.dialog.querySelector(".dlg-content"),t=e.querySelector(".dlg-select-radio:checked");if(t){for(var o=a(e.childNodes),n=0,c=0;c<o.indexOf(t.parentNode);c++)n+=o[c].offsetHeight;e.scrollTop=n}}e=document.getElementsByClassName("dlg-action");(e&&e.length?e[e.length-1]:l.dialog.getElementsByClassName("dlg-wrapper")[0]).focus()},15)}},{key:"hide",value:function(){var e=this;e.dialog.classList.add("dlg--closing"),setTimeout(function(){document.body.removeChild(e.dialog)},200)}}])&&n(e.prototype,t),o&&n(e,o),i}();function e(e,t,o){return new l(e,t,o)}return function(e){var t,o={},n=k.buttons;for(t in n)o[t]={value:n[t]};Object.defineProperties(e,o)}(e),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length;0<=--o&&t.item(o)!==this;);return-1<o}),e});