!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).duDialog=t()}(this,function(){"use strict";function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var o=0;o<t.length;o++){var c=t[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function a(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(o="Object"===o&&e.constructor?e.constructor.name:o)||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,c=new Array(t);o<t;o++)c[o]=e[o];return c}var k={defaults:{id:null,init:!1,dark:!1,buttons:1,okText:"Ok",yesText:"Yes",noText:"No",cancelText:"Cancel",selection:!1,confirmSelect:!1,multiple:!1,minSelect:1,maxSelect:null,allowSearch:!1,selectedValue:null,valueField:"value",textField:"item",callbacks:null},buttons:{DEFAULT:1,OK_CANCEL:2,YES_NO_CANCEL:3,NONE:0}};function r(e){var o={},c=!1,t=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(e)&&(c=e,t++);for(;t<n;t++)!function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(c&&"[object Object]"===Object.prototype.toString.call(e[t])?o[t]=r(!0,o[t],e[t]):o[t]=e[t])}(arguments[t]);return o}function d(e){return e.replace(/\s+/g,"")}function u(e,t){Array.isArray(e)?e.forEach(function(e){t.appendChild(e)}):t.appendChild(e)}function g(e,t,o,c){e=document.createElement(e);return void 0!==o&&(e[c?"innerHTML":"innerText"]=o),void 0!==t&&function e(t,o){for(var c in t){var n=t[c];"object"===S(n)&&null!==n&&void 0===n.dataset&&void 0===n[0]?e(n,o[c]):c in o&&(null!==n?o[c]=n:null!==n?o.setAttribute(c,n):o.removeAttribute(c))}}(t,e),e}function s(){function p(){b.dialog.classList.add("dlg--pulse"),setTimeout(function(){b.dialog.classList.remove("dlg--pulse")},200)}function h(){y.querySelectorAll(".dlg-select-checkbox:checked").length===b.config.maxSelect?(y.querySelectorAll(".dlg-select-checkbox:not(:checked)").forEach(function(e){e.setAttribute("disabled",!0),e.parentNode.classList.add("item--disabled")}),v&&v.maxReached&&v.maxReached.call(b,b.config.maxSelect)):y.querySelectorAll(".dlg-select-checkbox:not(:checked)").forEach(function(e){e.removeAttribute("disabled"),e.parentNode.classList.remove("item--disabled")})}function e(e){if("click"===e.type&&(e.target.matches(".du-dialog")&&(b.type===k.buttons.NONE?b.hide():p()),e.target.matches(".dlg-select-item")&&e.target.querySelector(".dlg-select-lbl").click(),e.target.matches(".dlg-action"))){if(e.target.matches(".ok-action"))if(b.config.selection&&b.config.multiple){for(var t=y.querySelectorAll(".dlg-select-checkbox:checked"),o=[],c=[],n=0;n<t.length;n++){var l=b.cache[t[n].id];c.push(l),o.push("string"==typeof l?t[n].value:l[b.config.valueField])}o.length>=b.config.minSelect?(b.config.selectedValue=o,v&&v.itemSelect&&(v.itemSelect.apply({value:o},[e,c]),b.hide())):(p(),v&&v.minRequired&&v.minRequired.call(b,b.config.minSelect))}else b.config.selection&&b.config.confirmSelect?(i=y.querySelector(".dlg-select-radio:checked"))?(a=b.cache[i.id],b.config.selectedValue="string"==typeof a?i.value:a[b.config.valueField],b.hide(),v&&v.itemSelect&&v.itemSelect.apply(i,[e,a])):p():v&&v.okClick?v.okClick.apply(b,e):b.hide();e.target.matches(".yes-action")&&(v&&v.yesClick?v.yesClick.apply(b,e):b.hide()),e.target.matches(".no-action")&&(v&&v.noClick?v.noClick.apply(b,e):b.hide()),e.target.matches(".cancel-action")&&(v&&v.cancelClick?v.cancelClick.apply(b,e):b.hide())}var i,a;if("change"===e.type&&(e.target.matches(".dlg-select-radio")?(i=e.target).checked&&!b.config.confirmSelect&&(a=b.cache[i.id],b.config.selectedValue="string"==typeof a?i.value:a[b.config.valueField],b.hide(),v&&v.itemSelect&&v.itemSelect.apply(i,[e,a])):e.target.matches(".dlg-select-checkbox")&&b.config.maxSelect&&h()),"scroll"===e.type&&e.target.matches(".dlg-content")&&e.target.classList[5<e.target.scrollTop?"add":"remove"]("content--scrolled"),"keyup"===e.type&&e.target.matches(".dlg-search"))for(var r=e.target.value,s=y.querySelectorAll(".dlg-select-item"),d=0;d<s.length;d++){var u=s[d],g=u.querySelector(b.config.multiple?".dlg-select-checkbox":".dlg-select-radio"),f=b.cache[g.id],m="string"===S(f)?f:f[b.config.textField],g=v&&v.onSearch?v.onSearch.call(b,f,r):0<=m.toLowerCase().indexOf(r.toLowerCase());u.classList[g?"remove":"add"]("item--nomatch")}}function n(e,t,o,c){var n,l,i;4<arguments.length&&void 0!==arguments[4]&&arguments[4]?u(g("div",{className:"dlg-select-item select--group"},e),y):(n=g("div",{className:"dlg-select-item"}),o=g("input",{className:b.config.multiple?"dlg-select-checkbox":"dlg-select-radio",id:t,name:"dlg-selection",type:b.config.multiple?"checkbox":"radio",value:o,checked:b.config.multiple?b.config.selectedValue&&(l=b.config.selectedValue,i=o,!!l&&(void 0!==l[0]&&0<l.filter(function(e){return e===i}).length)):b.config.selectedValue===o}),c=g("label",{className:"dlg-select-lbl",htmlFor:t},v&&v.itemRender?v.itemRender.call(b,e):'<span class="select-item">'+c+"</span>",!0),b.cache[t]=e,u([o,c],n),u(n,y))}function l(e){var t,o=S(e),c="";"string"===o?(c=(b.config.multiple?"dlg-cb":"dlg-radio")+d(e.toString()),n(e,c,e,e)):e.group&&Array.isArray(e.items)?(n(e.group,null,null,null,!0),e.items.forEach(l)):(t="string"===o?e:e[b.config.valueField],o="string"===o?e:e[b.config.textField],c=(b.config.multiple?"dlg-cb":"dlg-radio")+d(t.toString()),n(e,c,t,o))}var t,y,o,c,i,a,r,s,b=this,v=b.config.callbacks;switch(b.docFrag=document.createDocumentFragment(),b.dialog=g("div",{className:"du-dialog",id:b.config.id}),b.config.dark&&b.dialog.setAttribute("dark",!0),b.config.selection&&b.dialog.setAttribute("selection",!0),u(b.dialog,b.docFrag),u(c=g("div",{className:"dlg-wrapper",tabIndex:0}),b.dialog),b.title?u(t=g("div",{className:"dlg-header"},b.title),c):b.dialog.classList.add("dlg--no-title"),y=g("div",{className:"dlg-content"}),b.config.selection?(b.config.allowSearch&&u(g("input",{className:"dlg-search",placeholder:"Search..."}),t),b.content.forEach(l),b.config.multiple&&b.config.maxSelect&&h()):y.innerHTML=b.content,u(y,c),b.type!==k.buttons.NONE&&u(o=g("div",{className:"dlg-actions"}),c),b.type){case k.buttons.OK_CANCEL:u([g("button",{className:"dlg-action cancel-action",tabIndex:2},b.config.cancelText),g("button",{className:"dlg-action ok-action",tabIndex:1},b.config.okText)],o);break;case k.buttons.YES_NO_CANCEL:u([g("button",{className:"dlg-action cancel-action",tabIndex:3},b.config.cancelText),g("button",{className:"dlg-action no-action",tabIndex:2},b.config.noText),g("button",{className:"dlg-action yes-action",tabIndex:1},b.config.yesText)],o);break;case k.buttons.DEFAULT:u(g("button",{className:"dlg-action ok-action",tabIndex:1},b.config.okText),o)}c=y,i="scroll",a=e,Array.isArray(c)?c.forEach(function(e){e.addEventListener(i,a,!1)}):c.addEventListener(i,a,!1),r=b.dialog,s=e,["click","change","keyup"].forEach(function(e){r.addEventListener(e,s,!1)}),b.config.init||b.show()}var l=function(){function i(e,t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var c=this,n=S(e),l=S(t);if(c.config=r(!0,k.defaults,o),c.type=c.config.selection?c.config.multiple||c.config.confirmSelect?k.buttons.OK_CANCEL:k.buttons.NONE:c.config.buttons,"undefined"===n||"string"!==n&&null!==e)throw new Error("Dialog title is missing or incorrect format.");if(("undefined"===l||"string"!==l)&&!c.config.selection||!Array.isArray(t)&&c.config.selection)throw new Error("Dialog message is missing or incorrect format.");c.title=e,c.content=t,c.cache={},c.config.init||s.apply(c)}var e,t,o;return e=i,(t=[{key:"show",value:function(){var l=this;l.config.init&&s.apply(l),u(l.docFrag,document.body),setTimeout(function(){if(l.dialog.classList.add("dlg--open"),l.config.selection&&!l.config.multiple){var e=l.dialog.querySelector(".dlg-content"),t=e.querySelector(".dlg-select-radio:checked");if(t){for(var o=a(e.childNodes),c=0,n=0;n<o.indexOf(t.parentNode);n++)c+=o[n].offsetHeight;e.scrollTop=c}}e=document.getElementsByClassName("dlg-action");(e&&e.length?e[e.length-1]:l.dialog.getElementsByClassName("dlg-wrapper")[0]).focus()},15)}},{key:"hide",value:function(){var e=this;e.dialog.classList.add("dlg--closing"),setTimeout(function(){document.body.removeChild(e.dialog)},200)}}])&&c(e.prototype,t),o&&c(e,o),i}();function e(e,t,o){return new l(e,t,o)}return function(e){var t,o={},c=k.buttons;for(t in c)o[t]={value:c[t]};Object.defineProperties(e,o)}(e),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length;0<=--o&&t.item(o)!==this;);return-1<o}),e});