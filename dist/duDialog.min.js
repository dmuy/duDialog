!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).duDialog=t()}(this,function(){"use strict";function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(o="Object"===o&&e.constructor?e.constructor.name:o)||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var S={defaults:{id:null,init:!1,dark:!1,buttons:1,okText:"Ok",yesText:"Yes",noText:"No",cancelText:"Cancel",selection:!1,multiple:!1,minSelect:1,maxSelect:null,allowSearch:!1,selectedValue:null,valueField:"value",textField:"item",callbacks:null},buttons:{DEFAULT:1,OK_CANCEL:2,YES_NO_CANCEL:3,NONE:0}};function r(e){var o={},n=!1,t=0,l=arguments.length;"[object Boolean]"===Object.prototype.toString.call(e)&&(n=e,t++);for(;t<l;t++)!function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n&&"[object Object]"===Object.prototype.toString.call(e[t])?o[t]=r(!0,o[t],e[t]):o[t]=e[t])}(arguments[t]);return o}function d(e){return e.replace(/\s+/g,"")}function u(e,t){Array.isArray(e)?e.forEach(function(e){t.appendChild(e)}):t.appendChild(e)}function g(e,t,o,n){e=document.createElement(e);return void 0!==o&&(e[n?"innerHTML":"innerText"]=o),void 0!==t&&function e(t,o){for(var n in t){var l=t[n];"object"===k(l)&&null!==l&&void 0===l.dataset&&void 0===l[0]?e(l,o[n]):n in o&&(null!==l?o[n]=l:null!==l?o.setAttribute(n,l):o.removeAttribute(n))}}(t,e),e}function s(){function p(){b.dialog.classList.add("dlg--pulse"),setTimeout(function(){b.dialog.classList.remove("dlg--pulse")},200)}function h(){y.querySelectorAll(".dlg-select-checkbox:checked").length===b.config.maxSelect?(y.querySelectorAll(".dlg-select-checkbox:not(:checked)").forEach(function(e){e.setAttribute("disabled",!0),e.parentNode.classList.add("item--disabled")}),v&&v.maxReached&&v.maxReached.call(b,b.config.maxSelect)):y.querySelectorAll(".dlg-select-checkbox:not(:checked)").forEach(function(e){e.removeAttribute("disabled"),e.parentNode.classList.remove("item--disabled")})}function e(e){if("click"===e.type&&(e.target.matches(".du-dialog")&&(b.type===S.buttons.NONE?b.hide():p()),e.target.matches(".dlg-select-item")&&e.target.querySelector(".dlg-select-lbl").click(),e.target.matches(".dlg-action"))){if(e.target.matches(".ok-action"))if(b.config.selection&&b.config.multiple){for(var t=y.querySelectorAll(".dlg-select-checkbox:checked"),o=[],n=[],l=0;l<t.length;l++){var c=b.cache[t[l].id];n.push(c),o.push("string"==typeof c?t[l].value:c[b.config.valueField])}o.length>=b.config.minSelect?(b.config.selectedValue=o,v&&v.itemSelect&&(v.itemSelect.apply({value:o},[e,n]),b.hide())):(p(),v&&v.minRequired&&v.minRequired.call(b,b.config.minSelect))}else v&&v.okClick?v.okClick.apply(b,e):b.hide();e.target.matches(".yes-action")&&(v&&v.yesClick?v.yesClick.apply(b,e):b.hide()),e.target.matches(".no-action")&&(v&&v.noClick?v.noClick.apply(b,e):b.hide()),e.target.matches(".cancel-action")&&(v&&v.cancelClick?v.cancelClick.apply(b,e):b.hide())}var i,a;if("change"===e.type&&(e.target.matches(".dlg-select-radio")?(i=e.target).checked&&v&&v.itemSelect&&(a=b.cache[i.id],b.config.selectedValue="string"==typeof a?i.value:a[b.config.valueField],v.itemSelect.apply(i,[e,a]),b.hide()):e.target.matches(".dlg-select-checkbox")&&b.config.maxSelect&&h()),"scroll"===e.type&&e.target.matches(".dlg-content")&&e.target.classList[5<e.target.scrollTop?"add":"remove"]("content--scrolled"),"keyup"===e.type&&e.target.matches(".dlg-search"))for(var r=e.target.value,s=y.querySelectorAll(".dlg-select-item"),d=0;d<s.length;d++){var u=s[d],g=u.querySelector(b.config.multiple?".dlg-select-checkbox":".dlg-select-radio"),f=b.cache[g.id],m="string"===k(f)?f:f[b.config.textField],g=v&&v.onSearch?v.onSearch.call(b,f,r):0<=m.toLowerCase().indexOf(r.toLowerCase());u.classList[g?"remove":"add"]("item--nomatch")}}function l(e,t,o,n){var l,c,i;4<arguments.length&&void 0!==arguments[4]&&arguments[4]?u(g("div",{className:"dlg-select-item select--group"},e),y):(l=g("div",{className:"dlg-select-item"}),o=g("input",{className:b.config.multiple?"dlg-select-checkbox":"dlg-select-radio",id:t,name:"dlg-selection",type:b.config.multiple?"checkbox":"radio",value:o,checked:b.config.multiple?b.config.selectedValue&&(c=b.config.selectedValue,i=o,!!c&&(void 0!==c[0]&&0<c.filter(function(e){return e===i}).length)):b.config.selectedValue===o}),n=g("label",{className:"dlg-select-lbl",htmlFor:t},v&&v.itemRender?v.itemRender.call(b,e):'<span class="select-item">'+n+"</span>",!0),b.cache[t]=e,u([o,n],l),u(l,y))}function c(e){var t,o=k(e),n="";"string"===o?(n=(b.config.multiple?"dlg-cb":"dlg-radio")+d(e.toString()),l(e,n,e,e)):e.group&&Array.isArray(e.items)?(l(e.group,null,null,null,!0),e.items.forEach(c)):(t="string"===o?e:e[b.config.valueField],o="string"===o?e:e[b.config.textField],n=(b.config.multiple?"dlg-cb":"dlg-radio")+d(t.toString()),l(e,n,t,o))}var t,y,o,n,i,a,r,s,b=this,v=b.config.callbacks;switch(b.docFrag=document.createDocumentFragment(),b.dialog=g("div",{className:"du-dialog",id:b.config.id}),b.config.dark&&b.dialog.setAttribute("dark",!0),b.config.selection&&b.dialog.setAttribute("selection",!0),u(b.dialog,b.docFrag),u(n=g("div",{className:"dlg-wrapper",tabIndex:0}),b.dialog),b.title?u(t=g("div",{className:"dlg-header"},b.title),n):b.dialog.classList.add("dlg--no-title"),y=g("div",{className:"dlg-content"}),b.config.selection?(b.config.allowSearch&&u(g("input",{className:"dlg-search",placeholder:"Search..."}),t),b.content.forEach(c),b.config.multiple&&b.config.maxSelect&&h()):y.innerHTML=b.content,u(y,n),b.type!==S.buttons.NONE&&u(o=g("div",{className:"dlg-actions"}),n),b.type){case S.buttons.OK_CANCEL:u([g("button",{className:"dlg-action cancel-action",tabIndex:2},b.config.cancelText),g("button",{className:"dlg-action ok-action",tabIndex:1},b.config.okText)],o);break;case S.buttons.YES_NO_CANCEL:u([g("button",{className:"dlg-action cancel-action",tabIndex:3},b.config.cancelText),g("button",{className:"dlg-action no-action",tabIndex:2},b.config.noText),g("button",{className:"dlg-action yes-action",tabIndex:1},b.config.yesText)],o);break;case S.buttons.DEFAULT:u(g("button",{className:"dlg-action ok-action",tabIndex:1},b.config.okText),o)}n=y,i="scroll",a=e,Array.isArray(n)?n.forEach(function(e){e.addEventListener(i,a,!1)}):n.addEventListener(i,a,!1),r=b.dialog,s=e,["click","change","keyup"].forEach(function(e){r.addEventListener(e,s,!1)}),b.config.init||b.show()}var c=function(){function i(e,t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=this,l=k(e),c=k(t);if(n.config=r(!0,S.defaults,o),n.type=n.config.selection?n.config.multiple?S.buttons.OK_CANCEL:S.buttons.NONE:n.config.buttons,"undefined"===l||"string"!==l&&null!==e)throw new Error("Dialog title is missing or incorrect format.");if(("undefined"===c||"string"!==c)&&!n.config.selection||!Array.isArray(t)&&n.config.selection)throw new Error("Dialog message is missing or incorrect format.");n.title=e,n.content=t,n.cache={},n.config.init||s.apply(n)}var e,t,o;return e=i,(t=[{key:"show",value:function(){var c=this;c.config.init&&s.apply(c),u(c.docFrag,document.body),setTimeout(function(){if(c.dialog.classList.add("dlg--open"),c.config.selection&&!c.config.multiple){var e=c.dialog.querySelector(".dlg-content"),t=e.querySelector(".dlg-select-radio:checked");if(t){for(var o=a(e.childNodes),n=0,l=0;l<o.indexOf(t.parentNode);l++)n+=o[l].offsetHeight;e.scrollTop=n}}e=document.getElementsByClassName("dlg-action");(e&&e.length?e[e.length-1]:c.dialog.getElementsByClassName("dlg-wrapper")[0]).focus()},15)}},{key:"hide",value:function(){var e=this;e.dialog.classList.add("dlg--closing"),setTimeout(function(){document.body.removeChild(e.dialog)},200)}}])&&n(e.prototype,t),o&&n(e,o),i}();function e(e,t,o){return new c(e,t,o)}return function(e){var t,o={},n=S.buttons;for(t in n)o[t]={value:n[t]};Object.defineProperties(e,o)}(e),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length;0<=--o&&t.item(o)!==this;);return-1<o}),e});