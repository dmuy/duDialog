/* !Don't remove this!
 * duDialog v1.0 plugin
 * https://github.com/dmuy/duDialog
 *
 * Author: Dionlee Uy
 * Email: dionleeuy@gmail.com
 */
!function(e,t){"function"==typeof define&&define.amd?define("duDialog",[],t(e)):"object"==typeof exports?module.exports=t(e):e.duDialog=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var t=!!document.querySelector&&!!e.addEventListener,l={id:null,init:!1,okText:"Ok",cancelText:"Cancel",selection:!1,multiple:!1,allowSearch:!1,selectedValue:null,valueField:"value",textField:"item",callbacks:null},c=function(){var e={},t=!1,l=0,i=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],l++);for(var o=function(l){for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t&&"[object Object]"===Object.prototype.toString.call(l[i])?e[i]=c(!0,e[i],l[i]):e[i]=l[i])};i>l;l++){var a=arguments[l];o(a)}return e},i=function(){if(!(this instanceof i))return i.apply(Object.create(i.prototype),arguments);var e=this,t=arguments,o=typeof t[0],a=typeof t[1],n=typeof t[2];e.config=c(l,"object"===n?t[2]:t[3]);var r=e.config.selection?e.config.multiple?i.OK_CANCEL:i.NO_ACTION:i.DEFAULT;if(e.type="object"===n?r:t[2]||r,"undefined"===o||"string"!==o&&null!==t[0])throw new Error("Dialog title is missing or incorrect format.");if(("undefined"===a||"string"!==a)&&!e.config.selection||!Array.isArray(t[1])&&e.config.selection)throw new Error("Dialog message is missing or incorrect format.");return e.title=t[0],e.message=t[1],e.cache={},e.config.init||g.apply(e),e},o=function(e,t){var l=function(e,t){for(var c in e){var i=e[c];"object"==typeof i&&null!==i&&void 0===i.dataset&&void 0===i[0]?l(i,t[c]):c in t&&(null!==i?t[c]=i:null!==i?t.setAttribute(c,i):t.removeAttribute(c))}};l(t,e)},a=function(e){return e.replace(/\s+/g,"")},n=function(e,t){return e?void 0===e[0]?!1:e.filter(function(e){return e===t}).length>0:!1},r=function(e,t,l){Array.isArray(e)?e.forEach(function(e){e.addEventListener(t,l,!1)}):e.addEventListener(t,l,!1)},s=function(e,t,l){t.forEach(function(t){e.addEventListener(t,l,!1)})},d=function(e,t){Array.isArray(e)?e.forEach(function(e){t.appendChild(e)}):t.appendChild(e)},g=function(){if(t){var e,l,c,g,f=this,u=f.config.callbacks,p=function(e,t,l,c){var i=document.createElement(e);return"undefined"!=typeof l&&(i[c?"innerHTML":"innerText"]=l),"undefined"!=typeof t&&o(i,t),i},m=function(e){if("click"===e.type&&(e.target.matches(".du-dialog")&&(f.type===i.NO_ACTION?f.hide():(f.dialog.classList.add("dlg--pulse"),setTimeout(function(){f.dialog.classList.remove("dlg--pulse")},200))),e.target.matches(".dlg-select-item")&&e.target.querySelector(".dlg-select-lbl").click(),e.target.matches(".dlg-action"))){if(e.target.matches(".ok-action"))if(f.config.selection&&f.config.multiple){for(var t=c.querySelectorAll(":scope .dlg-select-checkbox:checked"),l=[],o=[],a=0;a<t.length;a++){var n=f.cache[t[a].id];o.push(n),l.push("string"==typeof n?t[a].value:n[f.config.valueField])}f.config.selectedValue=l,u.itemSelect.apply({value:l},[e,o]),f.hide()}else u&&u.okClick?u.okClick.apply(f,e):f.hide();e.target.matches(".cancel-action")&&(u&&u.cancelClick?u.cancelClick.apply(f,e):f.hide())}if("change"===e.type&&e.target.matches(".dlg-select-radio")){var r=e.target;if(r.checked&&u&&u.itemSelect){var n=f.cache[r.id];f.config.selectedValue="string"==typeof n?r.value:n[f.config.valueField],u.itemSelect.apply(r,[e,n]),f.hide()}}if("scroll"===e.type&&e.target.matches(".dlg-content")&&e.target.classList[e.target.scrollTop>5?"add":"remove"]("content--scrolled"),"keyup"===e.type&&e.target.matches(".dlg-search"))for(var s=e.target.value,d=c.querySelectorAll(":scope .dlg-select-item"),a=0;a<d.length;a++){var g=d[a],p=g.querySelector(":scope "+(f.config.multiple?".dlg-select-checkbox":".dlg-select-radio")),n=f.cache[p.id],m=typeof n,h="string"===m?n:n[f.config.textField],v=!1;v=u&&u.onSearch?u.onSearch.call(f,n,s):h.toLowerCase().indexOf(s.toLowerCase())>=0,g.classList[v?"remove":"add"]("item--nomatch")}};if(f.docFrag=document.createDocumentFragment(),f.dialog=p("div",{className:"du-dialog",id:f.config.id}),d(f.dialog,f.docFrag),e=p("div",{className:"dlg-wrapper",tabIndex:0}),d(e,f.dialog),f.title?(l=p("div",{className:"dlg-header"},f.title),d(l,e)):f.dialog.classList.add("dlg--no-title"),c=p("div",{className:"dlg-content"}),f.config.selection){f.config.allowSearch&&d(p("input",{className:"dlg-search",placeholder:"Search..."}),l);for(var h=0;h<f.message.length;h++){var v=f.message[h],y=typeof v,b="string"===y?v:v[f.config.valueField],k="string"===y?v:v[f.config.textField],N=(f.config.multiple?"dlg-cb":"dlg-radio")+a(b.toString()),C=p("div",{className:"dlg-select-item"}),x=p("input",{className:f.config.multiple?"dlg-select-checkbox":"dlg-select-radio",id:N,name:"dlg-selection",type:f.config.multiple?"checkbox":"radio",value:b,checked:f.config.multiple?f.config.selectedValue&&n(f.config.selectedValue,b):f.config.selectedValue===b}),A=p("label",{className:"dlg-select-lbl",htmlFor:N},u&&u.itemRender?u.itemRender.call(f,v):'<span class="select-item">'+k+"</span>",!0);f.cache[N]=v,d([x,A],C),d(C,c)}}else c.innerHTML=f.message;switch(d(c,e),f.type!==i.NO_ACTION&&(g=p("div",{className:"dlg-actions"}),d(g,e)),f.type){case i.OK_CANCEL:d([p("button",{className:"dlg-action cancel-action",tabIndex:2},f.config.cancelText),p("button",{className:"dlg-action ok-action",tabIndex:1},f.config.okText)],g);break;case i.DEFAULT:d(p("button",{className:"dlg-action ok-action",tabIndex:1},f.config.okText),g)}r(c,"scroll",m),s(f.dialog,["click","change","keyup"],m),f.config.init||f.show()}};return Object.defineProperties(i,{DEFAULT:{value:1},OK_CANCEL:{value:2},NO_ACTION:{value:3}}),i.prototype.show=function(){var e=this;e.config.init&&g.apply(this),d(e.docFrag,document.body),setTimeout(function(){if(e.dialog.classList.add("dlg--open"),e.config.selection&&!e.config.multiple){var t=e.dialog.querySelector(":scope .dlg-content"),l=t.querySelector(":scope .dlg-select-radio:checked");if(l){for(var c=Array.prototype.slice.call(t.childNodes),i=0,o=0;o<c.indexOf(l.parentNode);o++){var a=c[o].offsetHeight;i+=a}t.scrollTop=i}}var n=document.getElementsByClassName("dlg-action");n&&n.length?n[n.length-1].focus():e.dialog.getElementsByClassName("dlg-wrapper")[0].focus()},15)},i.prototype.hide=function(){var e=this;e.dialog.classList.add("dlg--closing"),setTimeout(function(){document.body.removeChild(e.dialog)},200)},i});