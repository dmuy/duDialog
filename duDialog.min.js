/* !Don't remove this!
 * duDialog v1.1 plugin
 * https://github.com/dmuy/duDialog
 *
 * Author: Dionlee Uy
 * Email: dionleeuy@gmail.com
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(e):"function"==typeof define&&define.amd?define("duDialog",[],t(e)):"object"==typeof exports?exports.duDialog=t(e):e.duDialog=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var t=!!document.querySelector&&!!e.addEventListener,l={id:null,init:!1,okText:"Ok",cancelText:"Cancel",selection:!1,multiple:!1,allowSearch:!1,selectedValue:null,valueField:"value",textField:"item",callbacks:null},o=function(){var e={},t=!1,l=0,c=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],l++);for(var i=function(l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(t&&"[object Object]"===Object.prototype.toString.call(l[c])?e[c]=o(!0,e[c],l[c]):e[c]=l[c])};l<c;l++){i(arguments[l])}return e},c=function(){if(!(this instanceof c))return c.apply(Object.create(c.prototype),arguments);var e=this,t=arguments,i=typeof t[0],a=typeof t[1],r=typeof t[2];e.config=o(l,"object"===r?t[2]:t[3]);var s=e.config.selection?e.config.multiple?c.OK_CANCEL:c.NO_ACTION:c.DEFAULT;if(e.type="object"===r?s:t[2]||s,"undefined"===i||"string"!==i&&null!==t[0])throw new Error("Dialog title is missing or incorrect format.");if(("undefined"===a||"string"!==a)&&!e.config.selection||!Array.isArray(t[1])&&e.config.selection)throw new Error("Dialog message is missing or incorrect format.");return e.title=t[0],e.message=t[1],e.cache={},e.config.init||n.apply(e),e},i=function(e,t){return!!e&&(void 0!==e[0]&&e.filter(function(e){return e===t}).length>0)},a=function(e,t){Array.isArray(e)?e.forEach(function(e){t.appendChild(e)}):t.appendChild(e)},n=function(){if(t){var e,l,o,n,r,s,d,g=this,u=g.config.callbacks,f=function(e,t,l,o){var c=document.createElement(e);return void 0!==l&&(c[o?"innerHTML":"innerText"]=l),void 0!==t&&function(e,t){var l=function(e,t){for(var o in e){var c=e[o];"object"==typeof c&&null!==c&&void 0===c.dataset&&void 0===c[0]?l(c,t[o]):o in t&&(null!==c?t[o]=c:null!==c?t.setAttribute(o,c):t.removeAttribute(o))}};l(t,e)}(c,t),c},p=function(e){if("click"===e.type&&(e.target.matches(".du-dialog")&&(g.type===c.NO_ACTION?g.hide():(g.dialog.classList.add("dlg--pulse"),setTimeout(function(){g.dialog.classList.remove("dlg--pulse")},200))),e.target.matches(".dlg-select-item")&&e.target.querySelector(".dlg-select-lbl").click(),e.target.matches(".dlg-action"))){if(e.target.matches(".ok-action"))if(g.config.selection&&g.config.multiple){for(var t=o.querySelectorAll(".dlg-select-checkbox:checked"),l=[],i=[],a=0;a<t.length;a++){var n=g.cache[t[a].id];i.push(n),l.push("string"==typeof n?t[a].value:n[g.config.valueField])}g.config.selectedValue=l,u.itemSelect.apply({value:l},[e,i]),g.hide()}else u&&u.okClick?u.okClick.apply(g,e):g.hide();e.target.matches(".cancel-action")&&(u&&u.cancelClick?u.cancelClick.apply(g,e):g.hide())}if("change"===e.type&&e.target.matches(".dlg-select-radio")){var r=e.target;if(r.checked&&u&&u.itemSelect){n=g.cache[r.id];g.config.selectedValue="string"==typeof n?r.value:n[g.config.valueField],u.itemSelect.apply(r,[e,n]),g.hide()}}if("scroll"===e.type&&e.target.matches(".dlg-content")&&e.target.classList[e.target.scrollTop>5?"add":"remove"]("content--scrolled"),"keyup"===e.type&&e.target.matches(".dlg-search")){var s=e.target.value,d=o.querySelectorAll(".dlg-select-item");for(a=0;a<d.length;a++){var f,p=d[a],m=p.querySelector(g.config.multiple?".dlg-select-checkbox":".dlg-select-radio"),h="string"===typeof(n=g.cache[m.id])?n:n[g.config.textField];f=u&&u.onSearch?u.onSearch.call(g,n,s):h.toLowerCase().indexOf(s.toLowerCase())>=0,p.classList[f?"remove":"add"]("item--nomatch")}}};if(g.docFrag=document.createDocumentFragment(),g.dialog=f("div",{className:"du-dialog",id:g.config.id}),a(g.dialog,g.docFrag),e=f("div",{className:"dlg-wrapper",tabIndex:0}),a(e,g.dialog),g.title?(l=f("div",{className:"dlg-header"},g.title),a(l,e)):g.dialog.classList.add("dlg--no-title"),o=f("div",{className:"dlg-content"}),g.config.selection){g.config.allowSearch&&a(f("input",{className:"dlg-search",placeholder:"Search..."}),l);for(var m=0;m<g.message.length;m++){var h=g.message[m],y=typeof h,v="string"===y?h:h[g.config.valueField],b="string"===y?h:h[g.config.textField],k=(g.config.multiple?"dlg-cb":"dlg-radio")+v.toString().replace(/\s+/g,""),N=f("div",{className:"dlg-select-item"}),E=f("input",{className:g.config.multiple?"dlg-select-checkbox":"dlg-select-radio",id:k,name:"dlg-selection",type:g.config.multiple?"checkbox":"radio",value:v,checked:g.config.multiple?g.config.selectedValue&&i(g.config.selectedValue,v):g.config.selectedValue===v}),S=f("label",{className:"dlg-select-lbl",htmlFor:k},u&&u.itemRender?u.itemRender.call(g,h):'<span class="select-item">'+b+"</span>",!0);g.cache[k]=h,a([E,S],N),a(N,o)}}else o.innerHTML=g.message;switch(a(o,e),g.type!==c.NO_ACTION&&(n=f("div",{className:"dlg-actions"}),a(n,e)),g.type){case c.OK_CANCEL:a([f("button",{className:"dlg-action cancel-action",tabIndex:2},g.config.cancelText),f("button",{className:"dlg-action ok-action",tabIndex:1},g.config.okText)],n);break;case c.DEFAULT:a(f("button",{className:"dlg-action ok-action",tabIndex:1},g.config.okText),n)}r=o,s="scroll",d=p,Array.isArray(r)?r.forEach(function(e){e.addEventListener(s,d,!1)}):r.addEventListener(s,d,!1),function(e,t,l){t.forEach(function(t){e.addEventListener(t,l,!1)})}(g.dialog,["click","change","keyup"],p),g.config.init||g.show()}};return Object.defineProperties(c,{DEFAULT:{value:1},OK_CANCEL:{value:2},NO_ACTION:{value:3}}),c.prototype.show=function(){var e=this;e.config.init&&n.apply(this),a(e.docFrag,document.body),setTimeout(function(){if(e.dialog.classList.add("dlg--open"),e.config.selection&&!e.config.multiple){var t=e.dialog.querySelector(".dlg-content"),l=t.querySelector(".dlg-select-radio:checked");if(l){for(var o=Array.prototype.slice.call(t.childNodes),c=0,i=0;i<o.indexOf(l.parentNode);i++){c+=o[i].offsetHeight}t.scrollTop=c}}var a=document.getElementsByClassName("dlg-action");a&&a.length?a[a.length-1].focus():e.dialog.getElementsByClassName("dlg-wrapper")[0].focus()},15)},c.prototype.hide=function(){var e=this;e.dialog.classList.add("dlg--closing"),setTimeout(function(){document.body.removeChild(e.dialog)},200)},c}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),l=t.length;--l>=0&&t.item(l)!==this;);return l>-1});