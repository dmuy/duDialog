/* !Don't remove this!
 * duDialog v1.0 plugin
 * https://github.com/dmuy/duDialog
 *
 * Author: Dionlee Uy
 * Email: dionleeuy@gmail.com
 */
!function(e,t){"function"==typeof define&&define.amd?define("duDialog",[],t(e)):"object"==typeof exports?module.exports=t(e):e.duDialog=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";function t(){var e={},t=!1,i=0,l=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],i++);for(var n=function(i){for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(t&&"[object Object]"===Object.prototype.toString.call(i[l])?e[l]=extend(!0,e[l],i[l]):e[l]=i[l])};l>i;i++){var o=arguments[i];n(o)}return e}var i=!!document.querySelector&&!!e.addEventListener,l={init:!1,okText:"Ok",cancelText:"Cancel",selection:!1,multiple:!1,selectedValue:null,valueField:"value",textField:"item",callbacks:null},n=function(){if(!(this instanceof n))return n.apply(Object.create(n.prototype),arguments);var e=this,i=arguments,o=typeof i[0],c=typeof i[1],a=typeof i[2];e.config=t(l,"object"===a?i[2]:i[3]);var r=e.config.selection?e.config.multiple?n.OK_CANCEL:n.NO_ACTION:n.DEFAULT;if(e.type="object"===a?r:i[2]||r,"undefined"===o||"string"!==o&&null!==i[0])throw new Error("Dialog title is missing or incorrect format.");if(("undefined"===c||"string"!==c)&&!e.config.selection||!Array.isArray(i[1])&&e.config.selection)throw new Error("Dialog message is missing or incorrect format.");return e.title=i[0],e.message=i[1],e.config.init||d.apply(e),e},o=function(e,t){var i=function(e,t){for(var l in e){var n=e[l];"object"==typeof n&&null!==n&&void 0===n.dataset&&void 0===n[0]?i(n,t[l]):t[l]=n}};i(t,e)},c=function(e){return e.replace(/\s+/g,"")},a=function(e,t){return e?void 0===e[0]?!1:e.filter(function(e){return e===t}).length>0:!1},d=function(){if(i){var e,t,l,d,r=this,g=r.config.callbacks,s=function(e,t,i,l){var n=document.createElement(e);return n.className=t,"undefined"!=typeof i&&(n[l?"innerHTML":"innerText"]=i),n},p=function(e){if("click"===e.type&&(e.target.matches(".du-dialog")&&r.type===n.NO_ACTION&&r.hide(),e.target.matches(".dlg-select-item")&&e.target.querySelector(".dlg-select-lbl").click(),e.target.matches(".dlg-action"))){if(e.target.matches(".ok-action"))if(r.config.selection&&r.config.multiple){for(var t=l.querySelectorAll(":scope .dlg-select-checkbox:checked"),i=[],o=[],c=0;c<t.length;c++){var a=t[c].item;o.push(a),i.push("string"==typeof a?t[c].value:a[r.config.valueField])}r.config.selectedValue=i,g.itemSelect.apply({value:i},[e,o]),r.hide()}else g&&g.okClick?g.okClick.apply(r,e):r.hide();e.target.matches(".cancel-action")&&(g&&g.cancelClick?g.cancelClick.apply(r,e):r.hide())}if("change"===e.type&&e.target.matches(".dlg-select-radio")){var d=e.target;d.checked&&g&&g.itemSelect&&(r.config.selectedValue="string"==typeof d.item?d.value:d.item[r.config.valueField],g.itemSelect.apply(d,[e,d.item]),r.hide())}"scroll"===e.type&&e.target.matches(".dlg-content")&&e.target.classList[e.target.scrollTop>5?"add":"remove"]("content--scrolled")};if(r.docFrag=document.createDocumentFragment(),r.dialog=s("div","du-dialog"),r.docFrag.appendChild(r.dialog),e=s("div","dlg-wrapper"),e.tabIndex=0,r.dialog.appendChild(e),r.title?(t=s("div","dlg-header",r.title),e.appendChild(t)):r.dialog.classList.add("dlg--no-title"),l=s("div","dlg-content"),r.config.selection)for(var f=0;f<r.message.length;f++){var u=r.message[f],h=typeof u,m="string"===h?u:u[r.config.valueField],v="string"===h?u:u[r.config.textField],y=s("div","dlg-select-item"),b=s("input",r.config.multiple?"dlg-select-checkbox":"dlg-select-radio"),C=s("label","dlg-select-lbl",v),k=(r.config.multiple?"dlg-cb":"dlg-radio")+c(m.toString());o(b,{id:k,name:"dlg-selection",type:r.config.multiple?"checkbox":"radio",value:m,checked:r.config.multiple?r.config.selectedValue&&a(r.config.selectedValue,m):r.config.selectedValue===m}),b.item=u,C.htmlFor=k,y.appendChild(b),y.appendChild(C),l.appendChild(y)}else l.innerHTML=r.message;switch(e.appendChild(l),r.type!==n.NO_ACTION&&(d=s("div","dlg-actions"),e.appendChild(d)),r.type){case n.OK_CANCEL:var O=s("button","dlg-action cancel-action",r.config.cancelText),x=s("button","dlg-action ok-action",r.config.okText);O.tabIndex=2,x.tabIndex=1,d.appendChild(O),d.appendChild(x);break;case n.DEFAULT:var x=s("button","dlg-action ok-action",r.config.okText);x.tabIndex=1,d.appendChild(x)}l.addEventListener("scroll",p,!1),r.dialog.addEventListener("click",p,!1),r.dialog.addEventListener("change",p,!1),r.config.init||r.show()}};return Object.defineProperties(n,{DEFAULT:{value:1},OK_CANCEL:{value:2},NO_ACTION:{value:3}}),n.prototype.show=function(){var e=this;e.config.init&&d.apply(this),document.body.appendChild(e.docFrag),setTimeout(function(){e.dialog.classList.add("dlg--open");var t=document.getElementsByClassName("dlg-action");t&&t.length?t[t.length-1].focus():e.dialog.getElementsByClassName("dlg-wrapper")[0].focus()},15)},n.prototype.hide=function(){var e=this;e.dialog.classList.add("dlg--closing"),setTimeout(function(){document.body.removeChild(e.dialog)},200)},n});